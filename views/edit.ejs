<%- include("partials/header") -%>

<h1 class="center-text list-title"> <%= wishwelly.title %></h1>
<% const link = "/collections/" + slug; %>
<div class="edit">
    <% if (lists.length != 0) { %>
        <p>
            <a class="link-style" href=<%= link %>>View public wishlist</a>
        </p>
    <% } %>


    <form method="get" action="./new">
        <div>
            <label for="newLink">Import new list</label>
            <input type="text" id="newLink" name="newLink" placeholder="Link to new list" value="https://www.amazon.com/hz/wishlist/ls/2RAF9Y78RJ8DW?ref_=wl_share" required>
            <input class="button" type="submit" value="Add list">
        </div>
    </form>
</div>

<div class="inline-flex full-width">
    <% if (lists.length != 0) { %>
        <form method="get" class="filter flex-column">
            <h5>Filter By</h5>
            <div class="checkbox-container flex-column">
                <div class="filter-section">
                <label class="label-title">Store Name</label>
                <% storeFilters.forEach(store => { %>
                    <div>
                        <input onChange="this.form.submit()" type="checkbox" name="store" id=<%= store %> value=<%= store %> <%= selectedStores?.includes(store) ? "checked" : ""%>>
                        <label for=<%= store %>> <%= store %></label>
                    </div>
                <% }); %>            
                </div>

                <!-- <div class="filter-section">
                    <label class="label-title">Tag</label>
                    <div>
                        <input onChange="this.form.submit()" type="checkbox" name="tag" id="clothing" value="clothing" >
                        <label for="clothing">Clothing</label>            
                    </div>
                    <div>
                        <input onChange="this.form.submit()" type="checkbox" name="tag" id="electronics" value="electronics">
                        <label for="electronics">Electronics</label>        
                    </div>
                    <div>
                        <input onChange="this.form.submit()" type="checkbox" name="tag" id="decor" value="decor">
                        <label for="decor">Decor</label>            
                    </div>
                </div> -->

            </div>
        </form>
    <% } %>

    <div class="body">
        <div class="margins">
                <% lists.forEach(list => { %>
                    <div class="store-header">
                        <h3 class="store"><%= list.storeName %></h3>
                        <a class="link-style" href=<%= list.url %> target="_blank"><%= list.url %></a>                        
                    </div>
                    <div class="grid-container">
                    <% list.items.forEach(item => { %>
                        <div class="grid-item">
                            <a class="noDecor" href= <%= item.link %> target="_blank">
                                <div class="image-container">
                                    <img class="image" src= "<%= item.imgURL %>" alt="NA">
                                </div>                            
                            </a>
                            <div id="edit-form" class="details-container">
                                <form name="editItem" id="editItem" action="" data-update-path=<%= "/" + list._id + "/" + item._id %>>
                                    <textarea id="editName" name="editName" class="item-details center"><%= item.altName %></textarea> 
                                    <div class="item-footer">
                                        <p>$<%= item.price %></p> 
                                        <input class="button" id="submit-button" type="submit" value="Save"/> 
                                    </div>                            
                                </form>
                            </div>    
                        </div>
                    <% }); %>
                    </div>
                <% }); %>
        </div>
    </div>
</div>


<%- include("partials/footer") -%>